<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <title>音乐上传</title>
    <link rel="stylesheet" href="https://cdn.staticfile.org/twitter-bootstrap/3.4.1/css/bootstrap.min.css">
    <link href="../css/bootstrap-select.min.css" rel="stylesheet" />
    <link rel="shortcut icon" type="image/x-icon" href="images/weblogo.ico">
    <script src="https://cdn.staticfile.org/jquery/2.1.1/jquery.min.js"></script>
    <script src="https://cdn.staticfile.org/twitter-bootstrap/3.4.1/js/bootstrap.min.js"></script>
    <script src="../js/bootstrap-select.js"></script>
    <link rel="stylesheet" href="css/register.css">
</head>

<body class="gray-bg">
<div id="nav">
    <div class="nav">
        <ul class="n1" id="ulHeader">
            <li class="home"><img src="images/webicon.png" width="170" height="40" alt="青听音乐" class="logo2">
            </li>
        </ul>
    </div>
</div>
<div id="content">
    <div class="boxb">
        <h3><span class="glyphicon glyphicon-star">&nbsp音乐上传</span></h3><br/><br/>
        <div class="wrapper wrapper-content animated fadeInRight">
            <div class="row">
                <div class="col-sm-12">
                    <div class="ibox float-e-margins">
                        <div class="ibox-title">
                        </div>
                        <div class="ibox-content">
                            <form id="musicUpload" role="form" method="post" enctype="multipart/form-data">
                                <div class="form-group">
                                    <!-- 表单 -->
                                    <label class="col-sm-2 control-label">歌曲名:</label> <!-- 表单 -->
                                    <div class="col-sm-10" style="margin: 0 0 20px">
                                        <input type="text" class="form-control" id="songName" name="songName"
                                               placeholder="请输入歌曲名" size="20">
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label class="col-sm-2 control-label">歌手名:</label>
                                    <div class="col-sm-10" style="margin: 0 0 20px">
                                        <input type="text" class="form-control" id="singer" name="singer"
                                               placeholder="请输入歌手名" size="20">
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label class="col-sm-2 control-label">歌曲类型:</label>
                                    <label class="col-sm-4" style="margin: 0 47% 20px 0;">
                                        <select name="songType" class="selectpicker show-tick form-control" data-size="5" multiple title="请选择音乐类型">
                                            <option value="1">经典</option>
                                            <option value="2">流行</option>
                                            <option value="3">古风</option>
                                            <option value="4">说唱</option>
                                            <option value="5">华语</option>
                                            <option value="6">欧美</option>
                                            <option value="7">日韩</option>
                                            <option value="8">DJ</option>
                                        </select>
                                    </label>
                                </div>

                                <div class="form-group">
                                    <label class="col-sm-2 control-label">封面图后缀:</label>
                                    <div class="col-sm-10" style="margin: 0 0 20px">
                                        <input type="text" class="form-control" id="imageFormat" name="imageFormat"
                                               placeholder="请输入歌曲封面图后缀" size="20">
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label class="col-sm-2 control-label">歌曲封面图:</label>
                                    <div class="col-sm-10" style="margin: 0 0 20px">
                                        <input type="file" class="form-control" id="songImage" name="songImage"
                                               size="20">
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label class="col-sm-2 control-label">歌曲源文件:</label>
                                    <div class="col-sm-10" style="margin: 0 0 20px">
                                        <input type="file" class="form-control" id="songFile" name="songFile" size="20">
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label class="col-sm-2 control-label">歌曲歌词:</label>
                                    <div class="col-sm-10" style="margin: 0 0 20px">
                                        <input type="file" class="form-control" id="songLyric" name="songLyric" size="20">
                                    </div>
                                </div>
                            </form>
                            <div class="form-group">
                                <div class="col-sm-offset-1 col-sm-10">
                                    <button id="submitUpload" class="btn btn-primary btn-lg">上传</button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<div class="footer">
    <div class="links">
        <a hidefocus="true" href="#" target="_blank">开发者：</a>
        <a hidefocus="true" href="#" target="_blank">iRappelt</a>
    </div>
    <div class="copyright">
        <p style="-moz-user-select: text;-webkit-user-select: text;-ms-user-select: text; user-select:text">
            如有侵权，请联系：iRappelt@163.com </p>
        <p>Copyright&nbsp;&nbsp;©&nbsp;&nbsp;2021
    </div>
</div>

<script src="js/jquery.min.js?v=2.1.4"></script>
<script src="js/bootstrap-paginator.min.js"></script>
<script src="js/jquery.validate.min.js"></script>
<script src="js/tools.js"></script>
<script src="js/jquery.cookie.js"></script>
<script type="text/javascript">

    // $('#musicUpload').validate({
    //     submitHandler: function(form) {
    //         musicLinkUpload($('#musicUpload').attr("action"), $('#musicUpload').serialize());//tools里的方法
    //     }
    // });

    $(document).ready(function () {

        /* 歌曲上传 */
        $('#submitUpload').click(function () {

            $.ajax({
                url: '/musicLink/addMusicLink',
                type: "post",
                cache: false,
                data: new FormData($('#musicUpload')[0]),
                processData: false,
                contentType: false,
                success: function (data) {
                    if (data.statusCode === 200) {
                        alert("上传成功");
                        // 刷新当前页面
                        window.location.reload();
                    } else if(data.statusCode === 10010) {
                        alert(data.statusMsg);
                    } else {
                        alert("上传失败，请稍后重试！");
                    }
                },
                error: function (data) {
                    alert("系统错误，请联系管理员");
                }
            })

        });

    });



</script>

</body>

</html>